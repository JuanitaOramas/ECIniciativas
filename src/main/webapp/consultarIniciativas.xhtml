<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Consulta de Iniciativas</title>
    <style>

        body {
            background: #F3F3F1;
        }

        .ui-datatable.borderless th,.ui-datatable.borderless td {
            padding: 15px;
            text-align: left;
        }

        .ui-datatable.borderless tbody,
        .ui-datatable.borderless th,
        .ui-datatable.borderless td {
            border-style: none;
            background-color: white;
            color: coral;
            border-collapse:collapse;
            font-family: "Bell MT";
        }
    </style>
</h:head>
<h:body>
    <script>
        function exportChart() {
            //export image
            $('#output').empty().append(PF('chart').exportAsImage());

            //show the dialog
            PF('dlg').show();
        }
    </script>

    <h:form id="formIniciativas">
        <ul>
            <li><h:commandLink value="Consultar iniciativas" action="consultarIniciativas" /></li>
            <li><h:commandLink value="Agrupar iniciativas" action="consultaAgruparIniciativas" /></li>
            <li><h:commandLink value="Consultar iniciativas por palabra clave" action="consultaIniciativaPalabraClave" /></li>
            <li><h:commandLink value="Consultar iniciativas por usuario" action="consultaUsuario" /></li>
            <li><h:commandLink value="Registrar iniciativa" action="registraIniciativa" /></li>
        </ul>

        <h1>Consulta Iniciativas</h1>

        <p:dataTable id="iniciativas" var="iniciativas" value="#{mb.getIniciativas()}" paginator="true" paginatorposition="bottom" rows="9" dynamic="true"  >
            <p:column headerText="Id">
                <h:link value="#{iniciativas.idIniciativa}" outcome="registraIniciativa">
                    <f:param name="id" value="#{iniciativas.idIniciativa}" />
                </h:link>
            </p:column>
            <p:column headerText="estado">
                <h:outputText value="#{iniciativas.estado}" />
            </p:column>
            <p:column headerText="descripción">
                <h:outputText value="#{iniciativas.descripcion}" />
            </p:column>
<!--            <p:column headerText="palabrasClave">-->
<!--                <h:outputText value="#{iniciativas.palabrasClave}" />-->
<!--            </p:column>-->
            <p:column headerText="fecha">
                <h:outputText value="#{iniciativas.fecha}" />
            </p:column>
        </p:dataTable>
        <p:chart type="bar" model="#{statistics.viviendas}" style="height:300px" widgetVar="chart" />

        <p:commandButton value="Exportar como PDF" ajax="false" >
            <p:dataExporter type="pdf" target="iniciativas" fileName="DatosIniciativas"/>
        </p:commandButton>
        <p:commandButton type="button" value="Export Image ↓ "  onclick="exportChart()"/>

    </h:form>

    <p:dialog widgetVar="dlg" showEffect="fade" modal="true" header="Chart as an Image" resizable="false">
        <p:outputPanel id="output" layout="block" style="width:500px;height:300px"/>
    </p:dialog>

<!--    <h:form id = "RecolectInfo">-->
<!--        -->
<!--    </h:form>-->



</h:body>
</html>

